{
  "$id": "https://raw.githubusercontent.com/unicornmakers/public/main/schemas/structure-24-08-10.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "unicloud Structure 24-08-10",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "format": "uri"
    },
    "costs": {
      "type": "object",
      "properties": {
        "forms": {
          "type": "number"
        },
        "messages": {
          "type": "number"
        }
      },
      "oneOf": [
        {
          "required": ["forms"]
        },
        {
          "required": ["messages"]
        }
      ],
      "additionalProperties": false
    },
    "forms": {
      "type": ["array", "object"],
      "items": {
        "type": "string"
      },
      "properties": {
        "prompts": {
          "type": ["array"],
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "cost": {
          "type": "number"
        }
      },
      "additionalProperties": false
    },
    "messages": {
      "type": ["array", "object"],
      "items": {
        "type": "string"
      },
      "properties": {
        "prompts": {
          "type": ["array"],
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "cost": {
          "type": "number"
        }
      },
      "additionalProperties": false
    },
    "objects": {
      "type": ["array", "object"],
      "items": {
        "type": "string"
      },
      "properties": {
        "forms": {
          "$ref": "#/properties/forms"
        },
        "messages": {
          "$ref": "#/properties/messages"
        },
        "objects": {
          "$ref": "#/properties/objects"
        },
        "relations": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "type": "object",
              "properties": {
                "forms": {
                  "$ref": "#/properties/forms"
                },
                "messages": {
                  "$ref": "#/properties/messages"
                },
                "targets": {
                  "type": ["array"],
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": ["targets"],
              "additionalProperties": false
            }
          },
          "additionalProperties": false 
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
